<div class="app-window">

  <div class="suggestion-window">

    <ul>
      <li>
        <a id="add-button" class="modal-trigger" href="#modal1"><i class="fa fa-plus fa-3x"></i></a>
      </li>
      <% @all_suggestions.each do |suggestion| %>
      <li>
        <h5><%= suggestion.title %></h5>
        <p>
          <%= suggestion.content %>
        </p>

        <div id="vote-section">
        <!-------------- if user has not voted, display voting options --------------->
        <% if suggestion.voters.where(id: @current_user.id).count == 0 %>
          <div id="vote-yes">
            <form class="vote-form-yes"
                  action="<%= suggestions_path %>/<%= suggestion.id %>/yes"
                  method="post">
              <input  type="hidden"
                      name="authenticity_token"
                      value="<%= form_authenticity_token %>">
              <button type="submit"
                      class="vote-button"><i class="fa fa-thumbs-up"></i></button>
            </form>
          </div>
          <div id="vote-no">
            <form class="vote-form-no"
                  action="<%= suggestions_path %>/<%= suggestion.id %>/no"
                  method="post">
              <input  type="hidden"
                      name="authenticity_token"
                      value="<%= form_authenticity_token %>">
              <button type="submit"
                      class="vote-button"><i class="fa fa-thumbs-down"></i></button>
            </form>
          </div>
        <!----------------------------------------------------------------------------->
        <% else %>
        <!-------------- if user has voted, display current voting results --------------->
          <div id="vote-yes">
            For: <%= suggestion.approvals.count %>
          </div>
          <div id="vote-no">
            Against: <%= suggestion.disapprovals.count %>
          </div>
        </div>
        <% end %>
        <!----------------------------------------------------------------------------->
      </li>
      <% end %>
    </ul>
    <!---------------------- Modal Structure ---------------------->
    <div id="modal1" class="modal">
      <div class="modal-content">
        <form class="suggestion-form" action="<%= suggestions_path %>" method="post">
          <input type="hidden"
                 name="authenticity_token"
                 value="<%= form_authenticity_token %>">
          <label id="suggestion-title">Title</label>
          <input type="text"
                 name="suggestion[title]"
                 placeholder="Enter title">
          <label>Content</label>
          <textarea id="suggestion-content"
                 type="text"
                 name="suggestion[content]"
                 placeholder="Enter suggestion"></textarea>
          <input type="submit"
                 value="Make Suggestion!">
        </form>
      </div>
    </div>
  </div>

</div>
